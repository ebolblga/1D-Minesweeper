var S=Object.defineProperty;var X=(g,u,f)=>u in g?S(g,u,{enumerable:!0,configurable:!0,writable:!0,value:f}):g[u]=f;var C=(g,u,f)=>(X(g,typeof u!="symbol"?u+"":u,f),f);import{a as q,b as z,r as d,w as H,h as W,e as h,i,j as Y,v as j,t as m,k as B,l as J,m as $,o as w}from"./entry.4dcb48b4.js";const K=""+globalThis.__publicAssetsURL("assets/bar.png"),Q=""+globalThis.__publicAssetsURL("assets/default.png"),Z=""+globalThis.__publicAssetsURL("assets/won.png"),ee=""+globalThis.__publicAssetsURL("assets/lost.png"),te={class:"flex justify-center flex-wrap pt-2 flex-col items-center min-w-[300px]"},se={class:"border-4 border-[#0855DD] w-[95vw] rounded-lg bg-[#C0C0C0] min-w-[300px] mt-5"},le=i("div",{class:"w-full h-6 bg-[#0855DD] text-white font-bold px-3 flex flex-row justify-between"},[$(" 1D Minesweeper "),i("a",{href:"https://youtu.be/Gb2jGy76v0Y",target:"_blank",rel:"noopener noreferrer"},[i("img",{src:K,style:{"image-rendering":"pixelated"},class:"cursor-pointer h-4 mt-1"})])],-1),ie={class:"bg-[#ECE9D8] text-left flex flex-row"},ne={class:"text-left h-6 w-full flex flex-row-reverse"},ae=["disabled"],oe=["disabled"],re={class:"bg-white p-1"},ue={class:"border-4 border-[#808080] bg-[#C0C0C0] flex flex-row"},ce={class:"w-[33%] h-[64px] text-center my-auto text-[#FF0000] text-lg font-black"},de={class:"w-[33%] h-[64px]"},fe={class:"w-[33%] h-[64px] text-center my-auto text-[#FF0000] text-lg font-black"},pe={class:"bg-[#808080] p-1"},ve={key:0,class:"mt-3"},he={key:0,class:"text-center text-lg mb-3"},me={key:1,class:"text-center text-lg mb-3"},we={key:2},ge={href:"http://www.stephan-bechtel.de/3bv.htm",target:"_blank",rel:"noopener noreferrer",class:"underline"},ye=i("br",null,null,-1),xe={href:"https://minesweepergame.com/website/authoritative-minesweeper/wiki/3BV#3BV_and_3BV.2Fs",target:"_blank",rel:"noopener noreferrer",class:"underline"},Ce=q({__name:"index",async setup(g){let u,f;z({title:"1D Minesweeper"});const a=d(16),r=d(3),y=d(!1);let p=[],x,L,l=[];const v=d(!1);let E=!0;const b=d(0),R=d(),k=d(),_=d(!1),M=d(0),D=d(3),T=new Image;T.src="./assets/texture_atlas.png",[u,f]=H(()=>new Promise(s=>{T.onload=()=>s(1)})),await u,f();class U{constructor(e,t,n){C(this,"position");C(this,"isMine");C(this,"type");C(this,"width");C(this,"height");this.position=e,this.isMine=t,this.type=n,this.width=16,this.height=16}draw(){L.drawImage(T,this.type*this.width,0,this.width,this.height,this.position*this.width,0,this.width,this.height)}}W(async()=>{c()});async function c(){v.value=!1,E=!0,b.value=0,k.value=0,_.value=!1,M.value=0,D.value=r.value,r.value>Math.floor(a.value/3)&&(r.value=Math.floor(a.value/3),r.value<1&&(r.value=1)),x=document.querySelector("canvas"),x.width=16*a.value,x.height=17,L=x.getContext("2d"),l=[],p=[],await I(),p.forEach((s,e)=>{switch(s){case!1:l.push(new U(e,!1,3));break;case!0:l.push(new U(e,!0,3));break}}),l.forEach(s=>{s.draw()})}async function I(){for(let t=0;t<a.value;t++)p[t]=!1;let s,e;for(let t=0;t<r.value;t++)for(s=!1;!s;)e=Math.floor(Math.random()*a.value),p[e]||(p[e]=!0,s=!0)}async function N(s){if(v.value)return;const e=A(x,s),t=Math.floor(e.x/16);if(E){if(R.value=Date.now(),l[t].isMine){for(let n=0;n<a.value;n++)if(!l[n].isMine){l[n].isMine=!0,p[n]=!0;break}l[t].isMine=!1,p[t]=!1,l[t].type=V(t)}E=!1}if(l[t].isMine)l[t].isMine&&l[t].type>2&&l[t].type<5&&(l[t].type=6,F());else{let n=V(t);if(l[t].type=n,n===0){let o=t-1;for(n=0;n===0&&o>=0;)n=V(o),l[o].type=n,l[o].draw(),o--;for(o=t+1,n=0;n===0&&o<a.value;)n=V(o),l[o].type=n,l[o].draw(),o++}}l[t].draw(),b.value++,G()&&(_.value=!0,F())}async function P(s){if(v.value)return;const e=A(x,s),t=Math.floor(e.x/16);l[t].type===3?(l[t].type=4,D.value--):l[t].type===4&&(l[t].type=3,D.value++),l[t].draw(),b.value++}function A(s,e){var t=s.getBoundingClientRect(),n=s.width/t.width,o=s.height/t.height;return{x:(e.clientX-t.left)*n,y:(e.clientY-t.top)*o}}async function F(){k.value=Date.now()-R.value,l.forEach((s,e)=>{s.isMine&&s.type===3?s.type=5:!s.isMine&&s.type===4&&(s.type=7),s.draw()}),v.value=!0,M.value=O()}function V(s){let e=0;return s>0&&l[s-1].isMine&&e++,s<a.value-1&&l[s+1].isMine&&e++,e}function G(){let s=0;return l.forEach(e=>{(e.isMine&&e.type>2&&e.type<5||!e.isMine&&e.type<3)&&s++}),s===a.value}function O(){let s=0,e=0;for(let t=0;t<a.value;t++)p[t]?(e>2?s++:e===2?t===2?s++:s+=2:e===1&&s++,e=0):e++;return e&&s++,s}return(s,e)=>(w(),h("div",te,[i("div",se,[le,i("div",ie,[i("p",{class:"ml-2 cursor-pointer",onClick:e[0]||(e[0]=t=>{a.value=8,r.value=1,c(),y.value=!1})},"Beginner"),i("p",{class:"ml-2 cursor-pointer",onClick:e[1]||(e[1]=t=>{a.value=16,r.value=3,c(),y.value=!1})},"Intermediate"),i("p",{class:"ml-2 cursor-pointer",onClick:e[2]||(e[2]=t=>{a.value=30,r.value=6,c(),y.value=!1})},"Expert"),i("div",ne,[Y(i("input",{class:"mr-2 border-2 w-10 cursor-pointer",type:"number","onUpdate:modelValue":e[3]||(e[3]=t=>r.value=t),disabled:!y.value,onChange:e[4]||(e[4]=t=>c()),min:"1",max:"200"},null,40,ae),[[j,r.value]]),Y(i("input",{class:"mr-2 border-2 w-10 cursor-pointer",type:"number","onUpdate:modelValue":e[5]||(e[5]=t=>a.value=t),disabled:!y.value,onChange:e[6]||(e[6]=t=>c()),min:"1",max:"200"},null,40,oe),[[j,a.value]]),i("p",{class:"mr-2",onClick:e[7]||(e[7]=t=>{c(),y.value=!0})},"Custom")])]),i("div",re,[i("div",ue,[i("div",ce,[i("p",null,m(D.value),1)]),i("div",de,[v.value?B("",!0):(w(),h("img",{key:0,onClick:e[8]||(e[8]=t=>c()),src:Q,style:{"image-rendering":"pixelated"},class:"ml-auto mr-auto my-2 cursor-pointer"})),v.value&&_.value?(w(),h("img",{key:1,onClick:e[9]||(e[9]=t=>c()),src:Z,style:{"image-rendering":"pixelated"},class:"ml-auto mr-auto my-2 cursor-pointer"})):B("",!0),v.value&&!_.value?(w(),h("img",{key:2,onClick:e[10]||(e[10]=t=>c()),src:ee,style:{"image-rendering":"pixelated"},class:"ml-auto mr-auto my-2 cursor-pointer"})):B("",!0)]),i("div",fe,[i("p",null,m(a.value)+"x1",1)])]),i("div",pe,[i("canvas",{onClick:e[11]||(e[11]=t=>N(t)),onContextmenu:e[12]||(e[12]=J(t=>P(t),["prevent"])),class:"w-full",style:{"image-rendering":"pixelated"}},null,32)])])]),v.value?(w(),h("div",ve,[_.value?(w(),h("p",he,"You won!")):(w(),h("p",me,"You lost...")),_.value?(w(),h("div",we,[i("p",null,[$("Time: "),i("b",null,m(k.value/1e3),1),$(" sec")]),i("a",ge,"3BV: "+m(M.value),1),ye,i("a",xe,"3BV/sec: "+m(Math.round(M.value/(k.value/1e3)*1e4)/1e4),1),i("p",null,"Clicks: "+m(b.value),1),i("p",null,"Efficiency: "+m(Math.round(M.value/b.value*100*1e4)/1e4)+"%",1),i("p",null,"CL/s: "+m(Math.round(b.value/(k.value/1e3)*1e4)/1e4),1)])):B("",!0)])):B("",!0)]))}});export{Ce as default};
