var I=Object.defineProperty;var P=(f,r,d)=>r in f?I(f,r,{enumerable:!0,configurable:!0,writable:!0,value:d}):f[r]=d;var h=(f,r,d)=>(P(f,typeof r!="symbol"?r+"":r,d),d);import{a as R,b as T,r as y,w as U,h as V,e as j,i as l,j as M,v as k,k as A,o as S}from"./entry.a6f9aebd.js";const X=""+globalThis.__publicAssetsURL("assets/alive.png"),Y={class:"flex justify-center flex-wrap pt-2 flex-col items-center min-w-[300px]"},q={class:"border-4 border-[#0855DD] w-[95vw] rounded-lg bg-[#C0C0C0] min-w-[300px]"},z=l("div",{class:"w-full h-6 bg-[#0855DD] text-white font-bold pl-3"},"1D Minesweeper",-1),G={class:"bg-[#ECE9D8] text-left flex flex-row"},H={class:"text-left h-6 w-full flex flex-row-reverse"},L=["disabled"],N=["disabled"],O={class:"bg-white p-1"},F={class:"bg-[#808080] p-1"},Q=R({__name:"index",async setup(f){let r,d;T({title:"1D Minesweeper"});const a=y(16),u=y(3),c=y(!1);let w=[],v,x,i=[];const m=new Image;m.src="./assets/texture_atlas.png",[r,d]=U(()=>new Promise(s=>{m.onload=()=>s(1)})),await r,d();class C{constructor(e,t,n){h(this,"position");h(this,"isMine");h(this,"type");h(this,"width");h(this,"height");this.position=e,this.isMine=t,this.type=n,this.width=16,this.height=16}draw(){x.drawImage(m,this.type*this.width,0,this.width,this.height,this.position*this.width,0,this.width,this.height)}}V(async()=>{p()});async function p(){u.value>Math.floor(a.value/3)&&(u.value=Math.floor(a.value/3),u.value<1&&(u.value=1)),v=document.querySelector("canvas"),v.width=16*a.value,v.height=17,x=v.getContext("2d"),await _(),i=[],w.forEach((s,e)=>{switch(s){case!1:i.push(new C(e,!1,3));break;case!0:i.push(new C(e,!0,3));break}}),i.forEach(s=>{s.draw()})}async function _(){for(let t=0;t<a.value;t++)w[t]=!1;let s,e;for(let t=0;t<u.value;t++)for(s=!1;!s;)e=Math.floor(Math.random()*a.value),w[e]||(w[e]=!0,s=!0)}async function D(s){const e=b(v,s),t=Math.floor(e.x/16);if(i[t].isMine)i[t].isMine&&i[t].type>2&&i[t].type<5&&(i[t].type=6,$());else{let n=g(t);if(i[t].type=n,n===0){let o=t-1;for(n=0;n===0&&o>=0;)n=g(o),i[o].type=n,i[o].draw(),o--;for(o=t+1,n=0;n===0&&o<a.value;)n=g(o),i[o].type=n,i[o].draw(),o++}}i[t].draw()}async function E(s){const e=b(v,s),t=Math.floor(e.x/16);i[t].type===3?i[t].type=4:i[t].type===4&&(i[t].type=3),i[t].draw()}function b(s,e){var t=s.getBoundingClientRect(),n=s.width/t.width,o=s.height/t.height;return{x:(e.clientX-t.left)*n,y:(e.clientY-t.top)*o}}async function $(){i.forEach((s,e)=>{s.isMine&&s.type===3&&(s.type=5),s.draw()}),console.log("Game over!")}async function B(){console.log("Map: "+w.toString()),console.log("Tiles: "),i.forEach((s,e)=>{console.log("tile #"+e+" type: "+s.type)})}function g(s){let e=0;return s>0&&i[s-1].isMine&&e++,s<a.value-1&&i[s+1].isMine&&e++,e}return(s,e)=>(S(),j("div",Y,[l("button",{onClick:e[0]||(e[0]=t=>B())},"Debug"),l("div",q,[z,l("div",G,[l("p",{class:"ml-2 cursor-pointer",onClick:e[1]||(e[1]=t=>{a.value=8,u.value=1,p(),c.value=!1})},"Beginner"),l("p",{class:"ml-2 cursor-pointer",onClick:e[2]||(e[2]=t=>{a.value=16,u.value=3,p(),c.value=!1})},"Intermediate"),l("p",{class:"ml-2 cursor-pointer",onClick:e[3]||(e[3]=t=>{a.value=30,u.value=6,p(),c.value=!1})},"Expert"),l("div",H,[M(l("input",{class:"mr-2 border-2 w-10 cursor-pointer",type:"number","onUpdate:modelValue":e[4]||(e[4]=t=>u.value=t),disabled:!c.value,onChange:e[5]||(e[5]=t=>p()),min:"1",max:"200"},null,40,L),[[k,u.value]]),M(l("input",{class:"mr-2 border-2 w-10 cursor-pointer",type:"number","onUpdate:modelValue":e[6]||(e[6]=t=>a.value=t),disabled:!c.value,onChange:e[7]||(e[7]=t=>p()),min:"1",max:"200"},null,40,N),[[k,a.value]]),l("p",{class:"mr-2",onClick:e[8]||(e[8]=t=>{p(),c.value=!0})},"Custom")])]),l("div",O,[l("img",{onClick:e[9]||(e[9]=t=>p()),src:X,style:{"image-rendering":"pixelated"},class:"ml-auto mr-auto my-2 cursor-pointer"}),l("div",F,[l("canvas",{onClick:e[10]||(e[10]=t=>D(t)),onContextmenu:e[11]||(e[11]=A(t=>E(t),["prevent"])),class:"w-full",style:{"image-rendering":"pixelated"}},null,32)])])])]))}});export{Q as default};
