var H=Object.defineProperty;var O=(g,u,d)=>u in g?H(g,u,{enumerable:!0,configurable:!0,writable:!0,value:d}):g[u]=d;var k=(g,u,d)=>(O(g,typeof u!="symbol"?u+"":u,d),d);import{a as J,b as K,r as f,w as Q,h as W,e as m,i,j,v as G,t as v,k as E,l as Z,m as R,o as w}from"./entry.17182dcd.js";const ee=""+globalThis.__publicAssetsURL("assets/bar.png"),te=""+globalThis.__publicAssetsURL("assets/default.png"),se=""+globalThis.__publicAssetsURL("assets/won.png"),le=""+globalThis.__publicAssetsURL("assets/lost.png"),ie={class:"flex justify-center flex-wrap pt-2 flex-col items-center min-w-[300px] select-none"},ne={class:"border-4 border-[#0855DD] w-[95vw] rounded-lg bg-[#C0C0C0] min-w-[300px] mt-5"},ae=i("div",{class:"w-full h-6 bg-[#0855DD] text-white font-bold px-3 flex flex-row justify-between"},[R(" 1D Minesweeper "),i("a",{href:"https://youtu.be/Gb2jGy76v0Y",target:"_blank",rel:"noopener noreferrer"},[i("img",{src:ee,style:{"image-rendering":"pixelated"},class:"cursor-pointer h-4 mt-1"})])],-1),oe={class:"bg-[#ECE9D8] text-left flex flex-row"},re={class:"text-left h-6 w-full flex flex-row-reverse"},ue=["disabled"],ce=["disabled"],fe={class:"bg-white p-1"},ve={class:"border-4 border-[#808080] bg-[#C0C0C0] flex flex-row"},de={class:"w-[33%] h-[64px] text-center my-auto text-[#FF0000] text-lg font-black"},pe={class:"w-[33%] h-[64px]"},he={class:"w-[33%] h-[64px] text-center my-auto text-[#FF0000] text-lg font-black"},me={class:"bg-[#808080] p-1"},we={key:0,class:"mt-3"},ge={key:0,class:"text-center text-lg mb-3"},ye={key:1,class:"text-center text-lg mb-3"},be={key:2,class:"select-text"},xe={href:"http://www.stephan-bechtel.de/3bv.htm",target:"_blank",rel:"noopener noreferrer",class:"underline"},_e=i("br",null,null,-1),ke={href:"https://minesweepergame.com/website/authoritative-minesweeper/wiki/3BV#3BV_and_3BV.2Fs",target:"_blank",rel:"noopener noreferrer",class:"underline"},Ee=J({__name:"index",async setup(g){let u,d;K({title:"1D Minesweeper"});const a=f(16),r=f(3),y=f(!1);let p=[],b,U,l=[];const h=f(!1);let T=!0;const x=f(0),A=f(),C=f(0),_=f(!1),M=f(0),B=f(3),$=new Image;$.src="./assets/texture_atlas.png",[u,d]=Q(()=>new Promise(s=>{$.onload=()=>s(1)})),await u,d();let D=document.createElement("canvas");D.width=16,D.height=16;let N=D.getContext("2d");async function L(s){const e=new Image;switch(s){case 0:{e.src="./favicon.ico";break}case 1:{e.src="./favicon_1.ico";break}case 2:{e.src="./favicon_2.ico";break}case 3:{e.src="./favicon_3.ico";break}}await new Promise(n=>{e.onload=()=>n(1)}),N.drawImage(e,0,0,16,16),document.getElementById("favicon").setAttribute("href",D.toDataURL()),history.replaceState(null,null,window.location.hash=="#1"?"#0":"#1")}class F{constructor(e,t,n){k(this,"position");k(this,"isMine");k(this,"type");k(this,"width");k(this,"height");this.position=e,this.isMine=t,this.type=n,this.width=16,this.height=16}draw(){U.drawImage($,this.type*this.width,0,this.width,this.height,this.position*this.width,0,this.width,this.height)}}W(async()=>{c()});async function c(){L(1),h.value=!1,T=!0,x.value=0,C.value=0,_.value=!1,M.value=0,B.value=r.value,r.value>Math.floor(a.value/3)&&(r.value=Math.floor(a.value/3),r.value<1&&(r.value=1)),b=document.querySelector("canvas"),b.width=16*a.value,b.height=17,U=b.getContext("2d"),l=[],p=[],await P(),p.forEach((s,e)=>{switch(s){case!1:l.push(new F(e,!1,3));break;case!0:l.push(new F(e,!0,3));break}}),l.forEach(s=>{s.draw()})}async function P(){for(let t=0;t<a.value;t++)p[t]=!1;let s,e;for(let t=0;t<r.value;t++)for(s=!1;!s;)e=Math.floor(Math.random()*a.value),p[e]||(p[e]=!0,s=!0)}async function S(s){if(h.value)return;const e=I(b,s),t=Math.floor(e.x/16);if(l[t].type!==4){if(T){if(A.value=Date.now(),l[t].isMine){for(let n=0;n<a.value;n++)if(!l[n].isMine){l[n].isMine=!0,p[n]=!0;break}l[t].isMine=!1,p[t]=!1,l[t].type=V(t)}T=!1}if(l[t].isMine)l[t].isMine&&l[t].type>2&&l[t].type<5&&(l[t].type=6,Y());else{let n=V(t);if(l[t].type=n,n===0){let o=t-1;for(n=0;n===0&&o>=0;)n=V(o),l[o].type=n,l[o].draw(),o--;for(o=t+1,n=0;n===0&&o<a.value;)n=V(o),l[o].type=n,l[o].draw(),o++}}l[t].draw(),x.value++,q()&&Y(!0)}}async function X(s){if(h.value)return;const e=I(b,s),t=Math.floor(e.x/16);l[t].type===3?(l[t].type=4,B.value--):l[t].type===4&&(l[t].type=3,B.value++),l[t].draw(),x.value++}function I(s,e){var t=s.getBoundingClientRect(),n=s.width/t.width,o=s.height/t.height;return{x:(e.clientX-t.left)*n,y:(e.clientY-t.top)*o}}async function Y(s=!1){C.value=Date.now()-A.value,L(s?2:3),h.value=!0,_.value=s,l.forEach((e,t)=>{e.isMine&&e.type===3?e.type=5:!e.isMine&&e.type===4&&(e.type=7),e.draw()}),M.value=z()}function V(s){let e=0;return s>0&&l[s-1].isMine&&e++,s<a.value-1&&l[s+1].isMine&&e++,e}function q(){let s=0;return l.forEach(e=>{(e.isMine&&e.type>2&&e.type<5||!e.isMine&&e.type<3)&&s++}),s===a.value}function z(){let s=0,e=0;for(let t=0;t<a.value;t++)p[t]?(e>2?s++:e===2?t===2?s++:s+=2:e===1&&s++,e=0):e++;return e&&s++,s}return(s,e)=>(w(),m("div",ie,[i("div",ne,[ae,i("div",oe,[i("p",{class:"ml-2 cursor-pointer",onClick:e[0]||(e[0]=t=>{a.value=8,r.value=1,c(),y.value=!1})},"Beginner"),i("p",{class:"ml-2 cursor-pointer",onClick:e[1]||(e[1]=t=>{a.value=16,r.value=3,c(),y.value=!1})},"Intermediate"),i("p",{class:"ml-2 cursor-pointer",onClick:e[2]||(e[2]=t=>{a.value=30,r.value=6,c(),y.value=!1})},"Expert"),i("div",re,[j(i("input",{class:"mr-2 border-2 w-10 cursor-pointer",type:"number","onUpdate:modelValue":e[3]||(e[3]=t=>r.value=t),disabled:!y.value,onChange:e[4]||(e[4]=t=>c()),min:"1",max:"200"},null,40,ue),[[G,r.value]]),j(i("input",{class:"mr-2 border-2 w-10 cursor-pointer",type:"number","onUpdate:modelValue":e[5]||(e[5]=t=>a.value=t),disabled:!y.value,onChange:e[6]||(e[6]=t=>c()),min:"1",max:"200"},null,40,ce),[[G,a.value]]),i("p",{class:"mr-2",onClick:e[7]||(e[7]=t=>{c(),y.value=!0})},"Custom")])]),i("div",fe,[i("div",ve,[i("div",de,[i("p",null,v(B.value),1)]),i("div",pe,[h.value?E("",!0):(w(),m("img",{key:0,onClick:e[8]||(e[8]=t=>c()),src:te,style:{"image-rendering":"pixelated"},class:"ml-auto mr-auto my-2 cursor-pointer"})),h.value&&_.value?(w(),m("img",{key:1,onClick:e[9]||(e[9]=t=>c()),src:se,style:{"image-rendering":"pixelated"},class:"ml-auto mr-auto my-2 cursor-pointer"})):E("",!0),h.value&&!_.value?(w(),m("img",{key:2,onClick:e[10]||(e[10]=t=>c()),src:le,style:{"image-rendering":"pixelated"},class:"ml-auto mr-auto my-2 cursor-pointer"})):E("",!0)]),i("div",he,[i("p",null,v(a.value)+"x1",1)])]),i("div",me,[i("canvas",{onClick:e[11]||(e[11]=t=>S(t)),onContextmenu:e[12]||(e[12]=Z(t=>X(t),["prevent"])),class:"w-full",style:{"image-rendering":"pixelated"},width:"256",height:"16"},null,32)])])]),h.value?(w(),m("div",we,[_.value?(w(),m("p",ge,"You won!")):(w(),m("p",ye,"You lost...")),_.value?(w(),m("div",be,[i("p",null,[R("Time: "),i("b",null,v(C.value/1e3),1),R(" sec")]),i("a",xe,"3BV: "+v(M.value),1),_e,i("a",ke,"3BV/sec: "+v(Math.round(M.value/(C.value/1e3)*1e4)/1e4),1),i("p",null,"Clicks: "+v(x.value),1),i("p",null,"Efficiency: "+v(Math.round(M.value/x.value*100*1e4)/1e4)+"%",1),i("p",null,"CL/s: "+v(Math.round(x.value/(C.value/1e3)*1e4)/1e4),1),i("p",null,"Mine density: "+v(Math.round(r.value/a.value*100*1e4)/1e4)+"%",1)])):E("",!0)])):E("",!0)]))}});export{Ee as default};
