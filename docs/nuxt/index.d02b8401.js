var E=Object.defineProperty;var B=(r,a,l)=>a in r?E(r,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[a]=l;var h=(r,a,l)=>(B(r,typeof a!="symbol"?a+"":a,l),l);import{a as P,b as S,w as D,f as I,e as R,h as w,i as X,o as Y}from"./entry.c8d69ef6.js";const $={class:"flex justify-center flex-wrap pt-2 flex-col items-center min-w-[300px]"},z=P({__name:"index",async setup(r){let a,l;S({title:"1D Minesweeper"});const p=16,M=3;let f=[],c,y,n=[];const u=new Image;u.src="./assets/texture_atlas.png",[a,l]=D(()=>new Promise(t=>{u.onload=()=>t(1)})),await a,l();class g{constructor(i,e,s){h(this,"position");h(this,"isMine");h(this,"type");h(this,"width");h(this,"height");this.position=i,this.isMine=e,this.type=s,this.width=16,this.height=17}draw(){y.drawImage(u,this.type*this.width,0,this.width,this.height,this.position*this.width,0,this.width,this.height)}}I(async()=>{m()});async function m(){c=document.querySelector("canvas"),c.width=16*p,c.height=17,y=c.getContext("2d"),await C(),n=[],f.forEach((t,i)=>{switch(t){case!1:n.push(new g(i,!1,3));break;case!0:n.push(new g(i,!0,3));break}}),n.forEach(t=>{t.draw()})}async function C(){for(let e=0;e<p;e++)f[e]=!1;let t,i;for(let e=0;e<M;e++)for(t=!1;!t;)i=Math.floor(Math.random()*p),f[i]||(f[i]=!0,t=!0)}async function k(t){const i=x(c,t),e=Math.floor(i.x/16);if(n[e].isMine)n[e].isMine&&n[e].type>2&&n[e].type<5&&(n[e].type=6,v());else{let s=d(e);if(n[e].type=s,s===0){let o=e-1;for(s=0;s===0&&o>=0;)s=d(o),n[o].type=s,n[o].draw(),o--;for(o=e+1,s=0;s===0&&o<p;)s=d(o),n[o].type=s,n[o].draw(),o++}}n[e].draw()}async function b(t){const i=x(c,t),e=Math.floor(i.x/16);n[e].type===3?n[e].type=4:n[e].type===4&&(n[e].type=3),n[e].draw()}function x(t,i){var e=t.getBoundingClientRect(),s=t.width/e.width,o=t.height/e.height;return{x:(i.clientX-e.left)*s,y:(i.clientY-e.top)*o}}async function v(){n.forEach((t,i)=>{t.isMine&&t.type===3&&(t.type=5),t.draw()}),console.log("Game over!")}async function _(){console.log("Map: "+f.toString()),console.log("Tiles: "),n.forEach((t,i)=>{console.log("tile #"+i+" type: "+t.type)})}function d(t){let i=0;return t>0&&n[t-1].isMine&&i++,t<p-1&&n[t+1].isMine&&i++,i}return(t,i)=>(Y(),R("div",$,[w("button",{onClick:i[0]||(i[0]=e=>_())},"Debug"),w("button",{onClick:i[1]||(i[1]=e=>m())},"Start game"),w("canvas",{onClick:i[2]||(i[2]=e=>k(e)),onContextmenu:i[3]||(i[3]=X(e=>b(e),["prevent"])),class:"w-[95%] mt-5",style:{"image-rendering":"pixelated"}},null,32)]))}});export{z as default};
