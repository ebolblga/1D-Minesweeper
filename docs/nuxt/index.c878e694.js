var X=Object.defineProperty;var q=(g,r,f)=>r in g?X(g,r,{enumerable:!0,configurable:!0,writable:!0,value:f}):g[r]=f;var C=(g,r,f)=>(q(g,typeof r!="symbol"?r+"":r,f),f);import{a as z,b as H,r as d,w as W,h as G,e as h,i,j as A,v as Y,t as m,k as B,l as J,m as I,o as w}from"./entry.88779d5d.js";const K=""+globalThis.__publicAssetsURL("assets/default.png"),Q=""+globalThis.__publicAssetsURL("assets/won.png"),Z=""+globalThis.__publicAssetsURL("assets/lost.png"),ee={class:"flex justify-center flex-wrap pt-2 flex-col items-center min-w-[300px]"},te={class:"border-4 border-[#0855DD] w-[95vw] rounded-lg bg-[#C0C0C0] min-w-[300px] mt-5"},se=i("div",{class:"w-full h-6 bg-[#0855DD] text-white font-bold pl-3"},"1D Minesweeper",-1),le={class:"bg-[#ECE9D8] text-left flex flex-row"},ie={class:"text-left h-6 w-full flex flex-row-reverse"},ne=["disabled"],ae=["disabled"],oe={class:"bg-white p-1"},re={class:"border-4 border-[#808080] bg-[#C0C0C0] flex flex-row"},ue={class:"w-[33%] h-full text-center my-auto text-[#FF0000] text-lg font-black"},ce={class:"w-[33%] h-full"},de={class:"w-[33%] h-full text-center my-auto text-[#FF0000] text-lg font-black"},fe={class:"bg-[#808080] p-1"},ve={key:0,class:"mt-3"},pe={key:0,class:"text-center text-lg mb-3"},he={key:1,class:"text-center text-lg mb-3"},me={key:2},we={href:"http://www.stephan-bechtel.de/3bv.htm",target:"_blank",rel:"noopener noreferrer",class:"underline"},ge=i("br",null,null,-1),ye={href:"https://minesweepergame.com/website/authoritative-minesweeper/wiki/3BV#3BV_and_3BV.2Fs",target:"_blank",rel:"noopener noreferrer",class:"underline"},be=z({__name:"index",async setup(g){let r,f;H({title:"1D Minesweeper"});const a=d(16),u=d(3),y=d(!1);let v=[],x,T,l=[];const p=d(!1);let V=!0;const _=d(0),F=d(),k=d(),b=d(!1),M=d(0),E=d(3),$=new Image;$.src="./assets/texture_atlas.png",[r,f]=W(()=>new Promise(s=>{$.onload=()=>s(1)})),await r,f();class L{constructor(e,t,n){C(this,"position");C(this,"isMine");C(this,"type");C(this,"width");C(this,"height");this.position=e,this.isMine=t,this.type=n,this.width=16,this.height=16}draw(){T.drawImage($,this.type*this.width,0,this.width,this.height,this.position*this.width,0,this.width,this.height)}}G(async()=>{c()});async function c(){p.value=!1,V=!0,_.value=0,k.value=0,b.value=!1,M.value=0,u.value>Math.floor(a.value/3)&&(u.value=Math.floor(a.value/3),u.value<1&&(u.value=1)),x=document.querySelector("canvas"),x.width=16*a.value,x.height=17,T=x.getContext("2d"),l=[],v=[],await N(),v.forEach((s,e)=>{switch(s){case!1:l.push(new L(e,!1,3));break;case!0:l.push(new L(e,!0,3));break}}),l.forEach(s=>{s.draw()})}async function N(){for(let t=0;t<a.value;t++)v[t]=!1;let s,e;for(let t=0;t<u.value;t++)for(s=!1;!s;)e=Math.floor(Math.random()*a.value),v[e]||(v[e]=!0,s=!0)}async function P(s){if(p.value)return;const e=R(x,s),t=Math.floor(e.x/16);if(V){if(F.value=Date.now(),l[t].isMine){for(let n=0;n<a.value;n++)if(!l[n].isMine){l[n].isMine=!0,v[n]=!0;break}l[t].isMine=!1,v[t]=!1,l[t].type=D(t)}V=!1}if(l[t].isMine)l[t].isMine&&l[t].type>2&&l[t].type<5&&(l[t].type=6,U());else{let n=D(t);if(l[t].type=n,n===0){let o=t-1;for(n=0;n===0&&o>=0;)n=D(o),l[o].type=n,l[o].draw(),o--;for(o=t+1,n=0;n===0&&o<a.value;)n=D(o),l[o].type=n,l[o].draw(),o++}}l[t].draw(),_.value++,O()&&(b.value=!0,U())}async function j(s){if(p.value)return;const e=R(x,s),t=Math.floor(e.x/16);l[t].type===3?(l[t].type=4,E.value--):l[t].type===4&&(l[t].type=3,E.value++),l[t].draw(),_.value++}function R(s,e){var t=s.getBoundingClientRect(),n=s.width/t.width,o=s.height/t.height;return{x:(e.clientX-t.left)*n,y:(e.clientY-t.top)*o}}async function U(){k.value=Date.now()-F.value,l.forEach((s,e)=>{s.isMine&&s.type===3?s.type=5:!s.isMine&&s.type===4&&(s.type=7),s.draw()}),p.value=!0,M.value=S()}function D(s){let e=0;return s>0&&l[s-1].isMine&&e++,s<a.value-1&&l[s+1].isMine&&e++,e}function O(){let s=0;return l.forEach(e=>{(e.isMine&&e.type>2&&e.type<5||!e.isMine&&e.type<3)&&s++}),s===a.value}function S(){let s=0,e=0;for(let t=0;t<a.value;t++)v[t]?(e>2?s++:e===2?t===2?s++:s+=2:e===1&&s++,e=0):e++;return e&&s++,s}return(s,e)=>(w(),h("div",ee,[i("div",te,[se,i("div",le,[i("p",{class:"ml-2 cursor-pointer",onClick:e[0]||(e[0]=t=>{a.value=8,u.value=1,c(),y.value=!1})},"Beginner"),i("p",{class:"ml-2 cursor-pointer",onClick:e[1]||(e[1]=t=>{a.value=16,u.value=3,c(),y.value=!1})},"Intermediate"),i("p",{class:"ml-2 cursor-pointer",onClick:e[2]||(e[2]=t=>{a.value=30,u.value=6,c(),y.value=!1})},"Expert"),i("div",ie,[A(i("input",{class:"mr-2 border-2 w-10 cursor-pointer",type:"number","onUpdate:modelValue":e[3]||(e[3]=t=>u.value=t),disabled:!y.value,onChange:e[4]||(e[4]=t=>c()),min:"1",max:"200"},null,40,ne),[[Y,u.value]]),A(i("input",{class:"mr-2 border-2 w-10 cursor-pointer",type:"number","onUpdate:modelValue":e[5]||(e[5]=t=>a.value=t),disabled:!y.value,onChange:e[6]||(e[6]=t=>c()),min:"1",max:"200"},null,40,ae),[[Y,a.value]]),i("p",{class:"mr-2",onClick:e[7]||(e[7]=t=>{c(),y.value=!0})},"Custom")])]),i("div",oe,[i("div",re,[i("div",ue,[i("p",null,m(E.value),1)]),i("div",ce,[p.value?B("",!0):(w(),h("img",{key:0,onClick:e[8]||(e[8]=t=>c()),src:K,style:{"image-rendering":"pixelated"},class:"ml-auto mr-auto my-2 cursor-pointer"})),p.value&&b.value?(w(),h("img",{key:1,onClick:e[9]||(e[9]=t=>c()),src:Q,style:{"image-rendering":"pixelated"},class:"ml-auto mr-auto my-2 cursor-pointer"})):B("",!0),p.value&&!b.value?(w(),h("img",{key:2,onClick:e[10]||(e[10]=t=>c()),src:Z,style:{"image-rendering":"pixelated"},class:"ml-auto mr-auto my-2 cursor-pointer"})):B("",!0)]),i("div",de,[i("p",null,m(a.value)+"x1",1)])]),i("div",fe,[i("canvas",{onClick:e[11]||(e[11]=t=>P(t)),onContextmenu:e[12]||(e[12]=J(t=>j(t),["prevent"])),class:"w-full",style:{"image-rendering":"pixelated"}},null,32)])])]),p.value?(w(),h("div",ve,[b.value?(w(),h("p",pe,"You won!")):(w(),h("p",he,"You lost...")),b.value?(w(),h("div",me,[i("p",null,[I("Time: "),i("b",null,m(k.value/1e3),1),I(" sec")]),i("a",we,"3BV: "+m(M.value),1),ge,i("a",ye,"3BV/sec: "+m(Math.round(M.value/(k.value/1e3)*1e4)/1e4),1),i("p",null,"Clicks: "+m(_.value),1),i("p",null,"Efficiency: "+m(Math.round(M.value/_.value*100*1e4)/1e4)+"%",1),i("p",null,"CL/s: "+m(Math.round(_.value/(k.value/1e3)*1e4)/1e4),1)])):B("",!0)])):B("",!0)]))}});export{be as default};
